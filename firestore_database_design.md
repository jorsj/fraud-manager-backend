# Firestore Database Design

*   **`queries`**: Stores a record of each valid query made. Each document represents an interaction.
    *   **Document ID**: Auto-generated by Firestore.
    *   **Fields**:
        *   `phone_number` (String): The caller's phone number in E.164 format (e.g., `+56912345678`).
        *   `national_id` (String): The National ID that was queried.
        *   `query_timestamp` (Timestamp): The exact date and time of the query, crucial for period-based filtering.

*   **`manual_blocks`**: Contains phone numbers that have been manually blocked by customer service agents.
    *   **Document ID**: The phone number to be blocked. Using the number as the ID allows for very fast and efficient existence checks.
    *   **Fields (Optional for auditing)**:
        *   `reason` (String): Reason for the block (e.g., "Reported by customer for fraudulent call").
        *   `block_timestamp` (Timestamp): When the block was applied.
        *   `agent_id` (String): Identifier of the agent who performed the block.

*   **`fraud_configuration`**: (Best Practice) Stores rule thresholds and parameters so they can be modified without redeploying code.
    *   **Document ID**: A descriptive name, like `national_id_thresholds`.
    *   **Fields**:
        *   `unique_national_id_limit` (Number): 3
        *   `day_period` (Number): 1
        *   `week_period` (Number): 7
        *   `month_period` (Number): 30
